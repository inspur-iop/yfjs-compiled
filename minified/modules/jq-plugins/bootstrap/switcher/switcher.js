define(["jquery"],function(a){"use strict";var b=[].slice,c=function(b,c){null==c&&(c={}),this.$element=a(b),this.options=a.extend({},a.fn.switcher.defaults,{state:this.$element.is(":checked"),size:this.$element.data("size"),animate:this.$element.data("animate"),disabled:this.$element.is(":disabled"),readonly:this.$element.is("[readonly]"),indeterminate:this.$element.data("indeterminate"),inverse:this.$element.data("inverse"),radioAllOff:this.$element.data("radio-all-off"),onColor:this.$element.data("on-color"),offColor:this.$element.data("off-color"),onText:this.$element.data("on-text"),offText:this.$element.data("off-text"),labelText:this.$element.data("label-text"),handleWidth:this.$element.data("handle-width"),labelWidth:this.$element.data("label-width"),baseClass:this.$element.data("base-class"),wrapperClass:this.$element.data("wrapper-class")},c),this.$wrapper=a("<div>",{class:function(a){return function(){var b;return b=[""+a.options.baseClass].concat(a._getClasses(a.options.wrapperClass)),b.push(a.options.state?a.options.baseClass+"-on":a.options.baseClass+"-off"),null!=a.options.size&&b.push(a.options.baseClass+"-"+a.options.size),a.options.disabled&&b.push(a.options.baseClass+"-disabled"),a.options.readonly&&b.push(a.options.baseClass+"-readonly"),a.options.indeterminate&&b.push(a.options.baseClass+"-indeterminate"),a.options.inverse&&b.push(a.options.baseClass+"-inverse"),a.$element.attr("id")&&b.push(a.options.baseClass+"-id-"+a.$element.attr("id")),b.join(" ")}}(this)()}),this.$container=a("<div>",{class:this.options.baseClass+"-container"}),this.$on=a("<span>",{html:this.options.onText,class:this.options.baseClass+"-handle-on "+this.options.baseClass+"-"+this.options.onColor}),this.$off=a("<span>",{html:this.options.offText,class:this.options.baseClass+"-handle-off "+this.options.baseClass+"-"+this.options.offColor}),this.$label=a("<span>",{html:this.options.labelText,class:this.options.baseClass+"-label"}),this.$element.on("init.bs.switcher",function(a){return function(){return a.options.onInit.apply(b,arguments)}}(this)),this.$element.on("switchChange.bs.switcher",function(a){return function(){return a.options.onSwitchChange.apply(b,arguments)}}(this)),this.$container=this.$element.wrap(this.$container).parent(),this.$wrapper=this.$container.wrap(this.$wrapper).parent(),this.$element.before(this.options.inverse?this.$off:this.$on).before(this.$label).before(this.options.inverse?this.$on:this.$off),this.options.indeterminate&&this.$element.prop("indeterminate",!0),this._init(),this._elementHandlers(),this._handleHandlers(),this._labelHandlers(),this._formHandler(),this._externalLabelHandler(),this.$element.trigger("init.bs.switcher")};return c.prototype.state=function(a,b){return void 0===a?this.options.state:this.options.disabled||this.options.readonly?this.$element:this.options.state&&!this.options.radioAllOff&&this.$element.is(":radio")?this.$element:(this.options.indeterminate&&this.indeterminate(!1),a=!!a,this.$element.prop("checked",a).trigger("change.bs.switcher",b),this.$element)},c.prototype.toggleState=function(a){return this.options.disabled||this.options.readonly?this.$element:this.options.indeterminate?(this.indeterminate(!1),this.state(!0)):this.$element.prop("checked",!this.options.state).trigger("change.bs.switcher",a)},c.prototype.size=function(a){return void 0===a?this.options.size:(null!=this.options.size&&this.$wrapper.removeClass(this.options.baseClass+"-"+this.options.size),a&&this.$wrapper.addClass(this.options.baseClass+"-"+a),this._width(),this._containerPosition(),this.options.size=a,this.$element)},c.prototype.animate=function(a){return void 0===a?this.options.animate:(a=!!a,a===this.options.animate?this.$element:this.toggleAnimate())},c.prototype.toggleAnimate=function(){return this.options.animate=!this.options.animate,this.$wrapper.toggleClass(this.options.baseClass+"-animate"),this.$element},c.prototype.disabled=function(a){return void 0===a?this.options.disabled:(a=!!a,a===this.options.disabled?this.$element:this.toggleDisabled())},c.prototype.toggleDisabled=function(){return this.options.disabled=!this.options.disabled,this.$element.prop("disabled",this.options.disabled),this.$wrapper.toggleClass(this.options.baseClass+"-disabled"),this.$element},c.prototype.readonly=function(a){return void 0===a?this.options.readonly:(a=!!a,a===this.options.readonly?this.$element:this.toggleReadonly())},c.prototype.toggleReadonly=function(){return this.options.readonly=!this.options.readonly,this.$element.prop("readonly",this.options.readonly),this.$wrapper.toggleClass(this.options.baseClass+"-readonly"),this.$element},c.prototype.indeterminate=function(a){return void 0===a?this.options.indeterminate:(a=!!a,a===this.options.indeterminate?this.$element:this.toggleIndeterminate())},c.prototype.toggleIndeterminate=function(){return this.options.indeterminate=!this.options.indeterminate,this.$element.prop("indeterminate",this.options.indeterminate),this.$wrapper.toggleClass(this.options.baseClass+"-indeterminate"),this._containerPosition(),this.$element},c.prototype.inverse=function(a){return void 0===a?this.options.inverse:(a=!!a,a===this.options.inverse?this.$element:this.toggleInverse())},c.prototype.toggleInverse=function(){var a,b;return this.$wrapper.toggleClass(this.options.baseClass+"-inverse"),b=this.$on.clone(!0),a=this.$off.clone(!0),this.$on.replaceWith(a),this.$off.replaceWith(b),this.$on=a,this.$off=b,this.options.inverse=!this.options.inverse,this.$element},c.prototype.onColor=function(a){var b;return b=this.options.onColor,void 0===a?b:(null!=b&&this.$on.removeClass(this.options.baseClass+"-"+b),this.$on.addClass(this.options.baseClass+"-"+a),this.options.onColor=a,this.$element)},c.prototype.offColor=function(a){var b;return b=this.options.offColor,void 0===a?b:(null!=b&&this.$off.removeClass(this.options.baseClass+"-"+b),this.$off.addClass(this.options.baseClass+"-"+a),this.options.offColor=a,this.$element)},c.prototype.onText=function(a){return void 0===a?this.options.onText:(this.$on.html(a),this._width(),this._containerPosition(),this.options.onText=a,this.$element)},c.prototype.offText=function(a){return void 0===a?this.options.offText:(this.$off.html(a),this._width(),this._containerPosition(),this.options.offText=a,this.$element)},c.prototype.labelText=function(a){return void 0===a?this.options.labelText:(this.$label.html(a),this._width(),this.options.labelText=a,this.$element)},c.prototype.handleWidth=function(a){return void 0===a?this.options.handleWidth:(this.options.handleWidth=a,this._width(),this._containerPosition(),this.$element)},c.prototype.labelWidth=function(a){return void 0===a?this.options.labelWidth:(this.options.labelWidth=a,this._width(),this._containerPosition(),this.$element)},c.prototype.baseClass=function(a){return this.options.baseClass},c.prototype.wrapperClass=function(b){return void 0===b?this.options.wrapperClass:(b||(b=a.fn.switcher.defaults.wrapperClass),this.$wrapper.removeClass(this._getClasses(this.options.wrapperClass).join(" ")),this.$wrapper.addClass(this._getClasses(b).join(" ")),this.options.wrapperClass=b,this.$element)},c.prototype.radioAllOff=function(a){return void 0===a?this.options.radioAllOff:(a=!!a)===this.options.radioAllOff?this.$element:(this.options.radioAllOff=a,this.$element)},c.prototype.onInit=function(b){return void 0===b?this.options.onInit:(b||(b=a.fn.switcher.defaults.onInit),this.options.onInit=b,this.$element)},c.prototype.onSwitchChange=function(b){return void 0===b?this.options.onSwitchChange:(b||(b=a.fn.switcher.defaults.onSwitchChange),this.options.onSwitchChange=b,this.$element)},c.prototype.destroy=function(){var a;return a=this.$element.closest("form"),a.length&&a.off("reset.bs.switcher").removeData("bs-switcher"),this.$container.children().not(this.$element).remove(),this.$element.unwrap().unwrap().off(".bootstrapSwitch").removeData("bs-switcher"),this.$element},c.prototype._width=function(){var a,b;return a=this.$on.add(this.$off),a.add(this.$label).css("width",""),b="auto"===this.options.handleWidth?Math.max(this.$on.width()+1,this.$off.width()+1):this.options.handleWidth,a.width(b),this.$label.width(function(a){return function(c,d){return"auto"!==a.options.labelWidth?parseInt(a.options.labelWidth):d<b?parseInt(b):parseInt(d)}}(this)),this._handleWidth=this.$on.outerWidth(),this._labelWidth=this.$label.outerWidth(),this.$container.width(2*this._handleWidth+this._labelWidth+1),this.$wrapper.css("min-width",0).width(this._handleWidth+this._labelWidth)},c.prototype._containerPosition=function(a,b){if(null==a&&(a=this.options.state),this.$container.css("margin-left",function(b){return function(){var c;return c=[0,"-"+b._handleWidth+"px"],b.options.indeterminate?"-"+b._handleWidth/2+"px":a?b.options.inverse?c[1]:c[0]:b.options.inverse?c[0]:c[1]}}(this)),b)return setTimeout(function(){return b()},50)},c.prototype._init=function(){var a,b;return a=function(a){return function(){return a._width(),a._containerPosition(null,function(){if(a.options.animate)return a.$wrapper.addClass(a.options.baseClass+"-animate")})}}(this),this.$wrapper.is(":visible")?a():b=window.setInterval(function(c){return function(){if(c.$wrapper.is(":visible"))return a(),window.clearInterval(b)}}(this),50)},c.prototype._elementHandlers=function(){return this.$element.on({"change.bs.switcher":function(b){return function(c,d){var e;if(c.preventDefault(),c.stopImmediatePropagation(),e=b.$element.is(":checked"),b._containerPosition(e),e!==b.options.state)return b.options.state=e,b.$wrapper.toggleClass(b.options.baseClass+"-off").toggleClass(b.options.baseClass+"-on"),d?void 0:(b.$element.is(":radio")&&a("[name='"+b.$element.attr("name")+"']").not(b.$element).prop("checked",!1).trigger("change.bs.switcher",!0),b.$element.trigger("switchChange.bs.switcher",[e]))}}(this),"focus.bs.switcher":function(a){return function(b){return b.preventDefault(),a.$wrapper.addClass(a.options.baseClass+"-focused")}}(this),"blur.bs.switcher":function(a){return function(b){return b.preventDefault(),a.$wrapper.removeClass(a.options.baseClass+"-focused")}}(this),"keydown.bs.switcher":function(a){return function(b){if(b.which&&!a.options.disabled&&!a.options.readonly)switch(b.which){case 37:return b.preventDefault(),b.stopImmediatePropagation(),a.state(!1);case 39:return b.preventDefault(),b.stopImmediatePropagation(),a.state(!0)}}}(this)})},c.prototype._handleHandlers=function(){return this.$on.on("click.bs.switcher",function(a){return function(b){return b.preventDefault(),b.stopPropagation(),a.state(!1),a.$element.trigger("focus.bs.switcher")}}(this)),this.$off.on("click.bs.switcher",function(a){return function(b){return b.preventDefault(),b.stopPropagation(),a.state(!0),a.$element.trigger("focus.bs.switcher")}}(this))},c.prototype._labelHandlers=function(){return this.$label.on({"mousedown.bs.switcher touchstart.bs.switcher":function(a){return function(b){if(!(a._dragStart||a.options.disabled||a.options.readonly))return b.preventDefault(),b.stopPropagation(),a._dragStart=(b.pageX||b.originalEvent.touches[0].pageX)-parseInt(a.$container.css("margin-left"),10),a.options.animate&&a.$wrapper.removeClass(a.options.baseClass+"-animate"),a.$element.trigger("focus.bs.switcher")}}(this),"mousemove.bs.switcher touchmove.bs.switcher":function(a){return function(b){var c;if(null!=a._dragStart&&(b.preventDefault(),!((c=(b.pageX||b.originalEvent.touches[0].pageX)-a._dragStart)<-a._handleWidth||c>0)))return a._dragEnd=c,a.$container.css("margin-left",a._dragEnd+"px")}}(this),"mouseup.bs.switcher touchend.bs.switcher":function(a){return function(b){var c;if(a._dragStart)return b.preventDefault(),a.options.animate&&a.$wrapper.addClass(a.options.baseClass+"-animate"),a._dragEnd?(c=a._dragEnd>-a._handleWidth/2,a._dragEnd=!1,a.state(a.options.inverse?!c:c)):a.state(!a.options.state),a._dragStart=!1}}(this),"mouseleave.bs.switcher":function(a){return function(b){return a.$label.trigger("mouseup.bs.switcher")}}(this)})},c.prototype._externalLabelHandler=function(){var a;return a=this.$element.closest("label"),a.on("click",function(b){return function(c){if(c.preventDefault(),c.stopImmediatePropagation(),c.target===a[0])return b.toggleState()}}(this))},c.prototype._formHandler=function(){var b;if(b=this.$element.closest("form"),!b.data("bs-switcher"))return b.on("reset.bs.switcher",function(){return window.setTimeout(function(){return b.find("input").filter(function(){return a(this).data("bs-switcher")}).each(function(){return a(this).switcher("state",this.checked)})},1)}).data("bs-switcher",!0)},c.prototype._getClasses=function(b){var c,d,e,f;if(!a.isArray(b))return[this.options.baseClass+"-"+b];for(d=[],e=0,f=b.length;e<f;e++)c=b[e],d.push(this.options.baseClass+"-"+c);return d},a.fn.switcher=function(){var d,e,f;return e=arguments[0],d=2<=arguments.length?b.call(arguments,1):[],f=this,this.each(function(){var b,g;if(b=a(this),g=b.data("bs-switcher"),g||b.data("bs-switcher",g=new c(this,e)),"string"==typeof e)return f=g[e].apply(g,d)}),f},a.fn.switcher.Constructor=c,a.fn.switcher.defaults={state:!0,size:null,animate:!0,disabled:!1,readonly:!1,indeterminate:!1,inverse:!1,radioAllOff:!1,onColor:"primary",offColor:"default",onText:"ON",offText:"OFF",labelText:"&nbsp;",handleWidth:"auto",labelWidth:"auto",baseClass:"bootstrap-switch",wrapperClass:"wrapper",onInit:function(){},onSwitchChange:function(){}}});