define("echarts2/chart/line",["require","./base","zrender2/shape/Polyline","../util/shape/Icon","../util/shape/HalfSmoothPolygon","../component/axis","../component/grid","../component/dataZoom","../config","../util/ecData","zrender2/tool/util","zrender2/tool/color","../chart"],function(a){function b(a,b,c,e,f){d.call(this,a,b,c,e,f),this.refresh(e)}function c(a,b,c){var d=b.x,e=b.y,g=b.width,h=b.height,i=h/2;b.symbol.match("empty")&&(a.fillStyle="#fff"),b.brushType="both";var j=b.symbol.replace("empty","").toLowerCase();j.match("star")?(i=j.replace("star","")-0||5,e-=1,j="star"):"rectangle"!==j&&"arrow"!==j||(d+=(g-h)/2,g=h);var k="";if(j.match("image")&&(k=j.replace(new RegExp("^image:\\/\\/"),""),j="image",d+=Math.round((g-h)/2)-1,g=h+=2),j=f.prototype.iconLibrary[j]){var l=b.x,m=b.y;a.moveTo(l,m+i),a.lineTo(l+5,m+i),a.moveTo(l+b.width-5,m+i),a.lineTo(l+b.width,m+i);var n=this;j(a,{x:d+4,y:e+4,width:g-8,height:h-8,n:i,image:k},function(){n.modSelf(),c()})}else a.moveTo(d,e+i),a.lineTo(d+g,e+i)}var d=a("./base"),e=a("zrender2/shape/Polyline"),f=a("../util/shape/Icon"),g=a("../util/shape/HalfSmoothPolygon");a("../component/axis"),a("../component/grid"),a("../component/dataZoom");var h=a("../config");h.line={zlevel:0,z:2,clickable:!0,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,dataFilter:"nearest",itemStyle:{normal:{label:{show:!1},lineStyle:{width:2,type:"solid",shadowColor:"rgba(0,0,0,0)",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0}},emphasis:{label:{show:!1}}},symbolSize:2,showAllSymbol:!1};var i=a("../util/ecData"),j=a("zrender2/tool/util"),k=a("zrender2/tool/color");return b.prototype={type:h.CHART_TYPE_LINE,_buildShape:function(){this.finalPLMap={},this._buildPosition()},_buildHorizontal:function(a,b,c,d){for(var e,f,g,h,i,j,k,l,m,n=this.series,o=c[0][0],p=n[o],q=this.component.xAxis.getAxis(p.xAxisIndex||0),r={},s=0,t=b;s<t&&null!=q.getNameByIndex(s);s++){f=q.getCoordByIndex(s);for(var u=0,v=c.length;u<v;u++){e=this.component.yAxis.getAxis(n[c[u][0]].yAxisIndex||0),i=h=k=j=e.getCoord(0);for(var w=0,x=c[u].length;w<x;w++)o=c[u][w],p=n[o],l=p.data[s],m=this.getDataFromOption(l,"-"),r[o]=r[o]||[],d[o]=d[o]||{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,sum:0,counter:0,average:0},"-"!==m?(m>=0?(h-=w>0?e.getCoordSize(m):i-e.getCoord(m),g=h):m<0&&(j+=w>0?e.getCoordSize(m):e.getCoord(m)-k,g=j),r[o].push([f,g,s,q.getNameByIndex(s),f,i]),d[o].min>m&&(d[o].min=m,d[o].minY=g,d[o].minX=f),d[o].max<m&&(d[o].max=m,d[o].maxY=g,d[o].maxX=f),d[o].sum+=m,d[o].counter++):r[o].length>0&&(this.finalPLMap[o]=this.finalPLMap[o]||[],this.finalPLMap[o].push(r[o]),r[o]=[])}h=this.component.grid.getY();for(var y,u=0,v=c.length;u<v;u++)for(var w=0,x=c[u].length;w<x;w++)o=c[u][w],p=n[o],l=p.data[s],"-"==(m=this.getDataFromOption(l,"-"))&&this.deepQuery([l,p,this.option],"calculable")&&(y=this.deepQuery([l,p],"symbolSize"),h+=2*y+5,g=h,this.shapeList.push(this._getCalculableItem(o,s,q.getNameByIndex(s),f,g,"horizontal")))}for(var z in r)r[z].length>0&&(this.finalPLMap[z]=this.finalPLMap[z]||[],this.finalPLMap[z].push(r[z]),r[z]=[]);this._calculMarkMapXY(d,c,"y"),this._buildBorkenLine(a,this.finalPLMap,q,"horizontal")},_buildVertical:function(a,b,c,d){for(var e,f,g,h,i,j,k,l,m,n=this.series,o=c[0][0],p=n[o],q=this.component.yAxis.getAxis(p.yAxisIndex||0),r={},s=0,t=b;s<t&&null!=q.getNameByIndex(s);s++){g=q.getCoordByIndex(s);for(var u=0,v=c.length;u<v;u++){e=this.component.xAxis.getAxis(n[c[u][0]].xAxisIndex||0),i=h=k=j=e.getCoord(0);for(var w=0,x=c[u].length;w<x;w++)o=c[u][w],p=n[o],l=p.data[s],m=this.getDataFromOption(l,"-"),r[o]=r[o]||[],d[o]=d[o]||{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,sum:0,counter:0,average:0},"-"!==m?(m>=0?(h+=w>0?e.getCoordSize(m):e.getCoord(m)-i,f=h):m<0&&(j-=w>0?e.getCoordSize(m):k-e.getCoord(m),f=j),r[o].push([f,g,s,q.getNameByIndex(s),i,g]),d[o].min>m&&(d[o].min=m,d[o].minX=f,d[o].minY=g),d[o].max<m&&(d[o].max=m,d[o].maxX=f,d[o].maxY=g),d[o].sum+=m,d[o].counter++):r[o].length>0&&(this.finalPLMap[o]=this.finalPLMap[o]||[],this.finalPLMap[o].push(r[o]),r[o]=[])}h=this.component.grid.getXend();for(var y,u=0,v=c.length;u<v;u++)for(var w=0,x=c[u].length;w<x;w++)o=c[u][w],p=n[o],l=p.data[s],"-"==(m=this.getDataFromOption(l,"-"))&&this.deepQuery([l,p,this.option],"calculable")&&(y=this.deepQuery([l,p],"symbolSize"),h-=2*y+5,f=h,this.shapeList.push(this._getCalculableItem(o,s,q.getNameByIndex(s),f,g,"vertical")))}for(var z in r)r[z].length>0&&(this.finalPLMap[z]=this.finalPLMap[z]||[],this.finalPLMap[z].push(r[z]),r[z]=[]);this._calculMarkMapXY(d,c,"x"),this._buildBorkenLine(a,this.finalPLMap,q,"vertical")},_buildOther:function(a,b,c,d){for(var e,f=this.series,g={},h=0,i=c.length;h<i;h++)for(var j=0,k=c[h].length;j<k;j++){var l=c[h][j],m=f[l];e=this.component.xAxis.getAxis(m.xAxisIndex||0);var n=this.component.yAxis.getAxis(m.yAxisIndex||0),o=n.getCoord(0);g[l]=g[l]||[],d[l]=d[l]||{min0:Number.POSITIVE_INFINITY,min1:Number.POSITIVE_INFINITY,max0:Number.NEGATIVE_INFINITY,max1:Number.NEGATIVE_INFINITY,sum0:0,sum1:0,counter0:0,counter1:0,average0:0,average1:0};for(var p=0,q=m.data.length;p<q;p++){var r=m.data[p],s=this.getDataFromOption(r,"-");if(s instanceof Array){var t=e.getCoord(s[0]),u=n.getCoord(s[1]);g[l].push([t,u,p,s[0],t,o]),d[l].min0>s[0]&&(d[l].min0=s[0],d[l].minY0=u,d[l].minX0=t),d[l].max0<s[0]&&(d[l].max0=s[0],d[l].maxY0=u,d[l].maxX0=t),d[l].sum0+=s[0],d[l].counter0++,d[l].min1>s[1]&&(d[l].min1=s[1],d[l].minY1=u,d[l].minX1=t),d[l].max1<s[1]&&(d[l].max1=s[1],d[l].maxY1=u,d[l].maxX1=t),d[l].sum1+=s[1],d[l].counter1++}}}for(var v in g)g[v].length>0&&(this.finalPLMap[v]=this.finalPLMap[v]||[],this.finalPLMap[v].push(g[v]),g[v]=[]);this._calculMarkMapXY(d,c,"xy"),this._buildBorkenLine(a,this.finalPLMap,e,"other")},_buildBorkenLine:function(a,b,c,d){for(var f,h="other"==d?"horizontal":d,l=this.series,m=a.length-1;m>=0;m--){var n=a[m],o=l[n],p=b[n];if(o.type===this.type&&null!=p)for(var q=this._getBbox(n,h),r=this._sIndex2ColorMap[n],s=this.query(o,"itemStyle.normal.lineStyle.width"),t=this.query(o,"itemStyle.normal.lineStyle.type"),u=this.query(o,"itemStyle.normal.lineStyle.color"),v=this.getItemStyleColor(this.query(o,"itemStyle.normal.color"),n,-1),w=null!=this.query(o,"itemStyle.normal.areaStyle"),x=this.query(o,"itemStyle.normal.areaStyle.color"),y=0,z=p.length;y<z;y++){var A=p[y],B="other"!=d&&this._isLarge(h,A);if(B)A=this._getLargePointList(h,A,o.dataFilter);else for(var C=0,D=A.length;C<D;C++)f=o.data[A[C][2]],(this.deepQuery([f,o,this.option],"calculable")||this.deepQuery([f,o],"showAllSymbol")||"categoryAxis"===c.type&&c.isMainAxis(A[C][2])&&"none"!=this.deepQuery([f,o],"symbol"))&&this.shapeList.push(this._getSymbol(n,A[C][2],A[C][3],A[C][0],A[C][1],h));var E=new e({zlevel:o.zlevel,z:o.z,style:{miterLimit:s,pointList:A,strokeColor:u||v||r,lineWidth:s,lineType:t,smooth:this._getSmooth(o.smooth),smoothConstraint:q,shadowColor:this.query(o,"itemStyle.normal.lineStyle.shadowColor"),shadowBlur:this.query(o,"itemStyle.normal.lineStyle.shadowBlur"),shadowOffsetX:this.query(o,"itemStyle.normal.lineStyle.shadowOffsetX"),shadowOffsetY:this.query(o,"itemStyle.normal.lineStyle.shadowOffsetY")},hoverable:!1,_main:!0,_seriesIndex:n,_orient:h});if(i.pack(E,l[n],n,0,y,l[n].name),this.shapeList.push(E),w){var F=new g({zlevel:o.zlevel,z:o.z,style:{miterLimit:s,pointList:j.clone(A).concat([[A[A.length-1][4],A[A.length-1][5]],[A[0][4],A[0][5]]]),brushType:"fill",smooth:this._getSmooth(o.smooth),smoothConstraint:q,color:x||k.alpha(r,.5)},highlightStyle:{brushType:"fill"},hoverable:!1,_main:!0,_seriesIndex:n,_orient:h});i.pack(F,l[n],n,0,y,l[n].name),this.shapeList.push(F)}}}},_getBbox:function(a,b){var c=this.component.grid.getBbox(),d=this.xMarkMap[a];return null!=d.minX0?[[Math.min(d.minX0,d.maxX0,d.minX1,d.maxX1),Math.min(d.minY0,d.maxY0,d.minY1,d.maxY1)],[Math.max(d.minX0,d.maxX0,d.minX1,d.maxX1),Math.max(d.minY0,d.maxY0,d.minY1,d.maxY1)]]:("horizontal"===b?(c[0][1]=Math.min(d.minY,d.maxY),c[1][1]=Math.max(d.minY,d.maxY)):(c[0][0]=Math.min(d.minX,d.maxX),c[1][0]=Math.max(d.minX,d.maxX)),c)},_isLarge:function(a,b){return!(b.length<2)&&("horizontal"===a?Math.abs(b[0][0]-b[1][0])<.5:Math.abs(b[0][1]-b[1][1])<.5)},_getLargePointList:function(a,b,c){var d;d="horizontal"===a?this.component.grid.getWidth():this.component.grid.getHeight();var e=b.length,f=[];if("function"!=typeof c)switch(c){case"min":c=function(a){return Math.max.apply(null,a)};break;case"max":c=function(a){return Math.min.apply(null,a)};break;case"average":c=function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c];return b/a.length};break;default:c=function(a){return a[0]}}for(var g=[],h=0;h<d;h++){var i=Math.floor(e/d*h),j=Math.min(Math.floor(e/d*(h+1)),e);if(!(j<=i)){for(var k=i;k<j;k++)g[k-i]="horizontal"===a?b[k][1]:b[k][0];g.length=j-i;for(var l=c(g),m=-1,n=1/0,k=i;k<j;k++){var o="horizontal"===a?b[k][1]:b[k][0],p=Math.abs(o-l);p<n&&(m=k,n=p)}var q=b[m].slice();"horizontal"===a?q[1]=l:q[0]=l,f.push(q)}}return f},_getSmooth:function(a){return a?.3:0},_getCalculableItem:function(a,b,c,d,e,f){var g=this.series,i=g[a].calculableHolderColor||this.ecTheme.calculableHolderColor||h.calculableHolderColor,j=this._getSymbol(a,b,c,d,e,f);return j.style.color=i,j.style.strokeColor=i,j.rotation=[0,0],j.hoverable=!1,j.draggable=!1,j.style.text=void 0,j},_getSymbol:function(a,b,c,d,e,f){var g=this.series,h=g[a],i=h.data[b],j=this.getSymbolShape(h,a,i,b,c,d,e,this._sIndex2ShapeMap[a],this._sIndex2ColorMap[a],"#fff","vertical"===f?"horizontal":"vertical");return j.zlevel=h.zlevel,j.z=h.z+1,this.deepQuery([i,h,this.option],"calculable")&&(this.setCalculable(j),j.draggable=!0),j},getMarkCoord:function(a,b){var c=this.series[a],d=this.xMarkMap[a],e=this.component.xAxis.getAxis(c.xAxisIndex),f=this.component.yAxis.getAxis(c.yAxisIndex);if(b.type&&("max"===b.type||"min"===b.type||"average"===b.type)){var g=null!=b.valueIndex?b.valueIndex:null!=d.maxX0?"1":"";return[d[b.type+"X"+g],d[b.type+"Y"+g],d[b.type+"Line"+g],d[b.type+g]]}return["string"!=typeof b.xAxis&&e.getCoordByIndex?e.getCoordByIndex(b.xAxis||0):e.getCoord(b.xAxis||0),"string"!=typeof b.yAxis&&f.getCoordByIndex?f.getCoordByIndex(b.yAxis||0):f.getCoord(b.yAxis||0)]},refresh:function(a){a&&(this.option=a,this.series=a.series),this.backupShapeList(),this._buildShape()},ontooltipHover:function(a,b){for(var c,d,e=a.seriesIndex,f=a.dataIndex,g=e.length;g--;)if(c=this.finalPLMap[e[g]])for(var h=0,i=c.length;h<i;h++){d=c[h];for(var j=0,k=d.length;j<k;j++)f===d[j][2]&&b.push(this._getSymbol(e[g],d[j][2],d[j][3],d[j][0],d[j][1],"horizontal"))}},addDataAnimation:function(a,b){function c(){0===--p&&b&&b()}function d(a){a.style.controlPointList=null}for(var e=this.series,f={},g=0,h=a.length;g<h;g++)f[a[g][0]]=a[g];for(var i,j,k,l,m,n,o,p=0,g=this.shapeList.length-1;g>=0;g--)if(m=this.shapeList[g]._seriesIndex,f[m]&&!f[m][3]){if(this.shapeList[g]._main&&this.shapeList[g].style.pointList.length>1){if(n=this.shapeList[g].style.pointList,j=Math.abs(n[0][0]-n[1][0]),l=Math.abs(n[0][1]-n[1][1]),o="horizontal"===this.shapeList[g]._orient,f[m][2]){if("half-smooth-polygon"===this.shapeList[g].type){var q=n.length;this.shapeList[g].style.pointList[q-3]=n[q-2],this.shapeList[g].style.pointList[q-3][o?0:1]=n[q-4][o?0:1],this.shapeList[g].style.pointList[q-2]=n[q-1]}this.shapeList[g].style.pointList.pop(),o?(i=j,k=0):(i=0,k=-l)}else{if(this.shapeList[g].style.pointList.shift(),"half-smooth-polygon"===this.shapeList[g].type){var r=this.shapeList[g].style.pointList.pop();o?r[0]=n[0][0]:r[1]=n[0][1],this.shapeList[g].style.pointList.push(r)}o?(i=-j,k=0):(i=0,k=l)}this.shapeList[g].style.controlPointList=null,this.zr.modShape(this.shapeList[g])}else{if(f[m][2]&&this.shapeList[g]._dataIndex===e[m].data.length-1){this.zr.delShape(this.shapeList[g].id);continue}if(!f[m][2]&&0===this.shapeList[g]._dataIndex){this.zr.delShape(this.shapeList[g].id);continue}}this.shapeList[g].position=[0,0],p++,this.zr.animate(this.shapeList[g].id,"").when(this.query(this.option,"animationDurationUpdate"),{position:[i,k]}).during(d).done(c).start()}p||b&&b()}},f.prototype.iconLibrary.legendLineIcon=c,j.inherits(b,d),a("../chart").define("line",b),b}),define("echarts2/util/shape/HalfSmoothPolygon",["require","zrender2/shape/Base","zrender2/shape/util/smoothBezier","zrender2/tool/util","zrender2/shape/Polygon"],function(a){function b(a){c.call(this,a)}var c=a("zrender2/shape/Base"),d=a("zrender2/shape/util/smoothBezier"),e=a("zrender2/tool/util");return b.prototype={type:"half-smooth-polygon",buildPath:function(b,c){var e=c.pointList;if(!(e.length<2))if(c.smooth){var f=d(e.slice(0,-2),c.smooth,!1,c.smoothConstraint);b.moveTo(e[0][0],e[0][1]);for(var g,h,i,j=e.length,k=0;k<j-3;k++)g=f[2*k],h=f[2*k+1],i=e[k+1],b.bezierCurveTo(g[0],g[1],h[0],h[1],i[0],i[1]);b.lineTo(e[j-2][0],e[j-2][1]),b.lineTo(e[j-1][0],e[j-1][1]),b.lineTo(e[0][0],e[0][1])}else a("zrender2/shape/Polygon").prototype.buildPath(b,c)}},e.inherits(b,c),b});